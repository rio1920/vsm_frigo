<!DOCTYPE html>
<html lang="es" data-theme="dark">
<meta name="viewport" content="width=device-width, initial-scale=1">
<head>
  {% load static %}
  {% load permisos_tags %}
  <link rel="stylesheet" href="../static/css/default-colors.css">
  <link rel="stylesheet" href="{% static 'css/output.css' %}" type="text/css">
  <meta charset="UTF-8">
  <title>Panel Principal - VSM</title>
  <!-- <script src="https://cdn.tailwindcss.com"></script> -->
  <style>
    :root {
      --fondo-oscuro: rgb(24, 24, 24);
      --detalle-dorado: rgb(106, 89, 45);
      --bg-secondary: rgb(12, 12, 12);
    }
  </style>
  <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script> -->
</head>

<body class="flex flex-col bg-darkmode items-center justify-center">
  {% include 'navbar.html' %}

  <div class="max-w-6xl mx-auto px-4 mt-6 sm:mt-8 lg:mt-16">
    
    <!-- Título estilizado -->
    <h1 class="text-2xl sm:text-3xl lg:text-4xl font-extrabold text-center mb-8 tracking-wide uppercase" style="color: var(--detalle-dorado); text-shadow: 1px 1px 2px black; margin-top: 0;"> Gestión de Vales de salida de materiales <br> VSM </h1>

    <div class="flex justify-center sm:mt-8 lg:mt-16">

      {% if user|has_perm:"facturado_can_create" %}
      <!-- Nuevo VSM -->
        <c-cardhome 
          title="Nuevo VSM" 
          url="{% url 'nuevo_vsm' %}" 
          description="Registrar una nueva solicitud de vale para retirar materiales.">
        </c-cardhome>
      {% endif %}

      {% if user|has_perm:"registros_can_view" %}
      <!-- Registros -->
        <c-cardhome 
          title="Registros" 
          url="{% url 'registros' %}" 
          description="Consultar registros pasados por fecha, solicitante o producto.">
        </c-cardhome>
      {% endif %}

      {% if user|has_perm:"facturado_can_deliver" %}
      <!-- Pendientes -->
        <c-cardhome 
          title="Pendientes" 
          url="{% url 'listar_vsm_pendientes' %}" 
          description="Validar la entrega o recepción de vales pendientes.">
        </c-cardhome>
      {% endif %}

    </div>
  </div>


<!-- Toast Notifications -->
{% if messages %}
  <div id="toast-container" class="fixed top-4 right-4 z-50">
    {% for message in messages %}
      <div class="mb-2 px-4 py-2 rounded-lg shadow-lg text-white
                  {% if message.tags == 'success' %} bg-green-600 {% elif message.tags == 'error' %} bg-red-600 {% else %} bg-gray-600 {% endif %}">
        {{ message }}
      </div>
    {% endfor %}
  </div>
  <script>
    setTimeout(() => {
      const toast = document.getElementById("toast-container");
      if (toast) toast.style.display = "none";
    }, 3000);
  </script>
{% endif %}

</body>
</html>
